:root{
  color-scheme: light dark;
  --brand-blue:#5C80BC; --brand-blue-rgb:92,128,188;
  --success:#3dc1d3; --warning:#f5cd79; --error:#c44569;
  --dark-base:#303952;

  --bg-primary:#f3f3f3; --bg-primary-rgb:243,243,243;
  --text-primary:#303952; --text-secondary:rgba(48,57,82,.70); --text-tertiary:rgba(48,57,82,.50);
  --surface-primary:#fff; --surface-secondary:#ececec; --surface-tertiary:#e2e2e2;
  --separator:rgba(48,57,82,.12);

  --sp-1:3px; --sp-2:5px; --sp-3:8px; --sp-4:13px; --sp-5:21px; --sp-6:34px; --sp-7:55px; --sp-8:89px;
  --font-family:'Inter',-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  --font-size-h1:28px; --font-size-h2:21px; --font-size-body:16px; --font-size-h3:13px; --font-size-caption:10px;
  --line-height:1.6; --control-h:48px; --radius-s:8px; --radius-m:13px; --radius-l:21px;
  --shadow-sm:0 3px 8px rgba(48,57,82,.08); --shadow-focus:0 0 0 3px rgba(var(--brand-blue-rgb),.28);
  --duration-fast:.21s; --duration-nat:.34s; --duration-slow:.55s; --ease:cubic-bezier(.4,0,.2,1);
  --sidebar-width:300px;
}
body.dark-mode{
  --bg-primary:#303952; --bg-primary-rgb:48,57,82;
  --text-primary:#f3f3f3; --text-secondary:rgba(243,243,243,.75); --text-tertiary:rgba(243,243,243,.55);
  --surface-primary:#3a425b; --surface-secondary:#4a4f65; --surface-tertiary:#424b64; --separator:rgba(243,243,243,.14);
  --shadow-sm:0 5px 13px rgba(0,0,0,.20);
}

/* Reset & base */
*{box-sizing:border-box}
html,body{height:100%;overflow-x:hidden;touch-action:manipulation}
body{
  margin:0;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  background:var(--bg-primary);color:var(--text-primary);
  font-family:var(--font-family);font-size:var(--font-size-body);line-height:var(--line-height);letter-spacing:-.01em;
  transition:background var(--duration-nat) var(--ease),color var(--duration-nat) var(--ease);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
h1{font-size:var(--font-size-h1);font-weight:800;letter-spacing:-.025em;margin:0}
p{font-size:var(--font-size-body);color:var(--text-secondary);margin:0}
.icon{width:20px;height:20px}

/* Header */
.main-header{
  position:sticky;top:0;z-index:1000;padding:var(--sp-4) 0;background:rgba(var(--bg-primary-rgb),.8);
  backdrop-filter:blur(21px);-webkit-backdrop-filter:blur(21px);border-bottom:1px solid var(--separator)
}
.header-content{max-width:1200px;margin:0 auto;padding:0 var(--sp-5);display:flex;align-items:center;justify-content:space-between;gap:var(--sp-4)}
.header-logo{width:36px;height:36px;object-fit:contain}
.header-title{font-weight:800;font-size:20px;display:none}
@media(min-width:769px){.header-title{display:block}}
.header-actions{display:flex;gap:8px}

/* Buttons / toggles */
.icon-btn{
  display:grid;place-content:center;width:44px;height:44px;border-radius:var(--radius-s);
  background:transparent;border:1px solid transparent;color:var(--text-secondary);cursor:pointer;
  transition:background var(--duration-fast) var(--ease),transform var(--duration-fast) var(--ease),color var(--duration-fast)
}
.icon-btn:hover{background:var(--surface-secondary);color:var(--brand-blue)}
.icon-btn:active{transform:scale(.96)}
.theme-toggle-btn{position:relative;overflow:hidden}
.icon-sun,.icon-moon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:opacity var(--duration-nat),transform var(--duration-nat)}
.icon-sun{opacity:0;transform:translate(-50%,-50%) rotate(-90deg) scale(.5)}
.icon-moon{opacity:1}
body.dark-mode .icon-sun{opacity:1;transform:translate(-50%,-50%) rotate(0) scale(1)}
body.dark-mode .icon-moon{opacity:0;transform:translate(-50%,-50%) rotate(90deg) scale(.5)}

.burger span{display:block;width:24px;height:2.5px;background:var(--text-primary);border-radius:2px;transition:transform .3s var(--ease),opacity .3s var(--ease)}
.burger span:not(:last-child){margin-bottom:6px}
.burger.active span:nth-child(1){transform:translateY(8.5px) rotate(45deg)}
.burger.active span:nth-child(2){opacity:0;transform:scaleX(.5)}
.burger.active span:nth-child(3){transform:translateY(-8.5px) rotate(-45deg)}

/* Sidebar */
.sidebar{position:fixed;top:0;right:0;z-index:1100;width:var(--sidebar-width);height:100%;background:var(--surface-primary);border-left:1px solid var(--separator);padding:var(--sp-5);transform:translateX(100%);transition:transform var(--duration-nat) var(--ease);display:flex;flex-direction:column}
body.sidebar-open .sidebar{transform:translateX(0)}
.sidebar-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1050;opacity:0;pointer-events:none;transition:opacity var(--duration-nat) var(--ease)}
body.sidebar-open .sidebar-overlay{opacity:1;pointer-events:auto}
.sidebar-nav{display:flex;flex-direction:column;gap:var(--sp-3);margin-top:var(--sp-6);overflow-y:auto}
.nav-item{display:flex;align-items:center;gap:var(--sp-4);padding:var(--sp-4);border-radius:var(--radius-m);text-decoration:none;color:var(--text-secondary);font-weight:700;border:1px solid transparent;transition:background var(--duration-fast),color var(--duration-fast)}
.nav-item:hover{background:var(--surface-secondary);color:var(--text-primary)}
.nav-item.active{background:var(--brand-blue);color:#fff}
.nav-divider{height:1px;background:var(--separator);margin:var(--sp-4) 0}

/* Layout */
.wrap{max-width:1200px;margin:0 auto;padding:0 var(--sp-5) var(--sp-7)}
.view-section{display:none;animation:fadeIn var(--duration-slow) var(--ease)}
.view-section.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(var(--sp-5))}to{opacity:1;transform:translateY(0)}}
.home-banner-container{margin:var(--sp-5) 0}
.home-banner-img{width:100%;height:auto;border-radius:13px;display:block;object-fit:cover}

/* Selects + search */
.custom-select-wrapper{position:relative;flex:1}
.custom-select-btn{display:flex;justify-content:space-between;align-items:center;width:100%;height:var(--control-h);padding:0 var(--sp-5);background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-s);font-weight:700;color:var(--text-primary);cursor:pointer}
.custom-select-btn:focus-visible{outline:none;border-color:var(--brand-blue);box-shadow:var(--shadow-focus)}
.custom-select-options{position:absolute;top:calc(100% + var(--sp-3));left:0;right:0;z-index:50;max-height:256px;overflow:auto;background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-m);box-shadow:var(--shadow-sm);opacity:0;pointer-events:none;transform:translateY(-6px);transition:opacity var(--duration-fast),transform var(--duration-fast)}
.custom-select-wrapper.open .custom-select-options{opacity:1;transform:translateY(0);pointer-events:auto}
.custom-select-option{padding:12px var(--sp-5);cursor:pointer;color:var(--text-secondary)}
.custom-select-option:hover,.custom-select-option.selected{background:var(--surface-secondary);color:var(--text-primary)}

.search-row{margin-top:var(--sp-4)}
.search-wrap{position:relative}
.search-wrap .icon{position:absolute;top:50%;left:var(--sp-5);transform:translateY(-50%);color:var(--text-tertiary);pointer-events:none}
.search-input{width:100%;height:var(--control-h);padding:0 var(--sp-5) 0 55px;background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-s);color:var(--text-primary)}
.search-input:focus-visible{outline:none;border-color:var(--brand-blue);box-shadow:var(--shadow-focus)}

#homeCountInfo,#accountCountInfo,#preorder .meta{margin-top:var(--sp-4);font-size:14px;font-weight:800;color:var(--text-secondary);text-align:center;background:var(--surface-secondary);padding:6px var(--sp-5);border-radius:var(--radius-s)}

/* Lists & cards */
.list-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(min(100%,260px),1fr));gap:var(--sp-5)}
.list-item{display:flex;justify-content:space-between;align-items:center;padding:var(--sp-5);background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-m);cursor:pointer;transition:transform var(--duration-fast),box-shadow var(--duration-fast),border-color var(--duration-fast)}
.list-item:hover{border-color:var(--brand-blue);box-shadow:var(--shadow-sm);transform:translateY(-5px)}
.list-item .title{font-weight:800}
.list-item .price{font-weight:900;color:var(--brand-blue)}

.card-grid{display:grid;grid-template-columns:1fr;gap:var(--sp-5)}
@media(min-width:720px){.card-grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:1024px){.card-grid{grid-template-columns:repeat(3,1fr)}}

/* Preorder card */
#viewPreorder .card{padding:var(--sp-5);background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-l);transition:transform var(--duration-fast),border-color var(--duration-fast),background var(--duration-fast)}
#viewPreorder .card.clickable{cursor:pointer}
#viewPreorder .card.clickable:hover{transform:translateY(-5px);box-shadow:var(--shadow-sm)}
#viewPreorder .card-header{display:grid;grid-template-columns:1fr auto;gap:var(--sp-4)}
#viewPreorder .card-name{font-weight:800}
#viewPreorder .card-product{color:var(--text-secondary)}
#viewPreorder .status-badge{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:9999px;font-size:10px;font-weight:900;text-transform:uppercase;letter-spacing:.04em}
#viewPreorder .status-badge::before{content:'';width:8px;height:8px;border-radius:50%}
#viewPreorder .status-badge.success{color:#155e67;background:#e0f5f7}
#viewPreorder .status-badge.success::before{background:var(--success)}
#viewPreorder .status-badge.progress{color:#293a57;background:#e6eaf1}
#viewPreorder .status-badge.progress::before{background:var(--brand-blue)}
#viewPreorder .status-badge.pending{color:#725a2e;background:#fdf8eb}
#viewPreorder .status-badge.pending::before{background:var(--warning)}
#viewPreorder .status-badge.failed{color:#6d243a;background:#f8e4e8}
#viewPreorder .status-badge.failed::before{background:var(--error)}
#viewPreorder .pagination{display:flex;justify-content:center;align-items:center;gap:var(--sp-4);margin-top:var(--sp-6)}
.pagination-btn{height:44px;padding:0 var(--sp-5);background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-s);font-weight:800;cursor:pointer}
.pagination-btn:disabled{opacity:.45;cursor:not-allowed}

/* Accounts card */
.account-card{display:grid;grid-template-columns:120px 1fr;gap:var(--sp-4);padding:var(--sp-4);background:var(--surface-primary);border:1px solid var(--separator);border-radius:var(--radius-l);transition:transform var(--duration-fast),box-shadow var(--duration-fast),border-color var(--duration-fast)}
.account-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-sm);border-color:var(--separator)}
.account-media{width:120px;height:100px;border-radius:10px;overflow:hidden;background:var(--surface-secondary)}
.account-thumb{width:100%;height:100%;object-fit:cover;display:block}
.account-title{font-weight:900;letter-spacing:-.01em;margin-bottom:4px}
.account-meta{font-size:13px;color:var(--text-secondary);display:flex;gap:6px;align-items:center}
.account-desc{font-size:14px;color:var(--text-secondary);margin:8px 0 0}
.account-actions{margin-top:10px}
.btn-primary{display:inline-block;background:var(--brand-blue);color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:800;text-decoration:none;cursor:pointer}
.btn-primary:hover{filter:brightness(1.05)}

/* Empty & error */
.empty{grid-column:1/-1;display:flex;justify-content:center;align-items:center;padding:var(--sp-7);border:1px dashed var(--separator);border-radius:var(--radius-l);text-align:center}
.empty-content{display:flex;flex-direction:column;align-items:center;gap:var(--sp-4);max-width:300px}
.empty-icon{width:55px;height:55px;color:var(--text-tertiary)}
.err{padding:var(--sp-5);border:1px solid var(--error);border-radius:var(--radius-m);background:rgba(196,69,105,.1);color:var(--error);font-weight:800;text-align:center}

/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:1200}
.modal.visible{display:flex}
.modal-content{width:min(540px,96vw);background:var(--surface-primary);border-radius:16px;box-shadow:var(--shadow-sm);border:1px solid var(--separator)}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--separator)}
.modal-body{padding:18px}
.modal-price{font-weight:900;font-size:20px;margin-bottom:12px}
.payment-options{display:grid;gap:10px}
.payment-option{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;background:var(--surface-secondary)}
.modal-summary{display:flex;justify-content:space-between;margin-top:12px;font-weight:800}
.modal-footer{padding:16px 18px;border-top:1px solid var(--separator);display:flex;justify-content:flex-end}

/* Skeleton */
.skeleton{position:relative;overflow:hidden;background:var(--surface-secondary)}
.skeleton::after{content:"";position:absolute;inset:0;background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.06),transparent);transform:translateX(-100%);animation:shimmer 1.2s infinite}
@keyframes shimmer{to{transform:translateX(100%)}}
