/*
 * PlayPal.ID Refactored Stylesheet
 * Architecture: BEM-like, Component-based
 * Methodology: Mobile-first, Design System via CSS Variables
 */

:root {
  /* Colors */
  --color-brand: #007AFF;
  --color-brand-rgb: 0, 122, 255;
  --color-brand-light: #F0F7FF;
  --color-success: #34C759;
  --color-warning: #FF9500;
  --color-error: #FF3B30;
  --color-text-primary: #1D1D1F;
  --color-text-secondary: #6E6E73;
  --color-text-tertiary: #AEAEB2;
  --color-surface-primary: #FFFFFF;
  --color-surface-secondary: #F5F5F7;
  --color-surface-tertiary: #E8E8ED;
  --color-border: #D1D1D6;
  --color-overlay: rgba(0, 0, 0, 0.5);
  
  /* Typography */
  --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --font-size-base: 16px;
  --font-size-sm: 14px;
  --font-size-xs: 12px;
  --font-size-lg: 18px;
  --font-size-xl: 24px;
  --font-size-xxl: 32px;
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;
  --line-height-base: 1.6;
  
  /* Spacing & Sizing */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 24px;
  --space-6: 32px;
  --space-7: 48px;
  --space-8: 64px;
  --control-height: 48px;
  --sidebar-width: 280px;
  --header-height: 64px;
  --container-width: 1200px;
  --container-padding: var(--space-5);
  
  /* Borders & Shadows */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 16px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04), 0 1px 1px rgba(0,0,0,0.02);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.04);
  --shadow-lg: 0 10px 15px rgba(0,0,0,0.08), 0 4px 6px rgba(0,0,0,0.04);
  --shadow-focus: 0 0 0 3px rgba(var(--color-brand-rgb), 0.25);
  
  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-natural: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* 1. Global Styles & Resets */
*, *::before, *::after { box-sizing: border-box; }
html { font-size: var(--font-size-base); -webkit-tap-highlight-color: transparent; }
body {
  margin: 0;
  background-color: var(--color-surface-secondary);
  color: var(--color-text-primary);
  font-family: var(--font-family-sans);
  line-height: var(--line-height-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
body.overflow-hidden { overflow: hidden; }
h1, h2, h3, h4, p { margin: 0; }
a { color: var(--color-brand); text-decoration: none; }
img { display: block; max-width: 100%; height: auto; }
button { font-family: inherit; }
:focus-visible { outline: none; box-shadow: var(--shadow-focus); }

/* 2. Layout & Utilities */
.container {
  width: 100%;
  max-width: var(--container-width);
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--container-padding);
  padding-right: var(--container-padding);
}
.main-content {
  padding-top: calc(var(--header-height) + var(--space-6));
  padding-bottom: var(--space-7);
  min-height: 100vh;
}
.page { animation: fadeIn var(--transition-natural); }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.grid {
  display: grid;
  gap: var(--space-4);
  margin-top: var(--space-5);
}
.grid--1-col { grid-template-columns: 1fr; }
@media (min-width: 640px) {
  .grid--2-cols { grid-template-columns: repeat(2, 1fr); }
}
@media (min-width: 1024px) {
  .grid--3-cols { grid-template-columns: repeat(3, 1fr); }
  .grid--4-cols { grid-template-columns: repeat(4, 1fr); }
}

/* 3. Components */
/* Header */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  height: var(--header-height);
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--color-border);
}
.header__container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
}
.header__brand {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  transition: opacity var(--transition-fast);
}
.header__brand:hover { opacity: 0.8; }
.header__logo { height: 32px; width: 32px; }
.header__title { display: none; }
@media (min-width: 768px) { .header__title { display: block; } }
.header__actions { display: flex; align-items: center; gap: var(--space-3); }
.header__status {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1) var(--space-3);
  border-radius: 99px;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
.header__status.is-open { color: #166534; background-color: #DCFCE7; }
.header__status.is-closed { color: var(--color-text-secondary); background-color: var(--color-surface-tertiary); }
.header__menu-toggle {
  display: grid;
  place-content: center;
  width: 40px;
  height: 40px;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 102;
}
.header__menu-toggle span {
  display: block;
  width: 22px;
  height: 2px;
  background-color: var(--color-text-primary);
  border-radius: 2px;
  transition: transform var(--transition-natural), opacity var(--transition-natural);
}
.header__menu-toggle span:not(:last-child) { margin-bottom: 5px; }
.header__menu-toggle[aria-expanded="true"] span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
.header__menu-toggle[aria-expanded="true"] span:nth-child(2) { opacity: 0; }
.header__menu-toggle[aria-expanded="true"] span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

/* Sidebar */
.sidebar {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 101;
  width: var(--sidebar-width);
  padding: calc(var(--header-height) + var(--space-5)) var(--space-5);
  background-color: var(--color-surface-primary);
  border-left: 1px solid var(--color-border);
  transform: translateX(100%);
  transition: transform var(--transition-natural);
  visibility: hidden;
}
.sidebar.is-open { transform: translateX(0); visibility: visible; }
.sidebar__nav { display: flex; flex-direction: column; gap: var(--space-2); }
.sidebar__link {
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
.sidebar__link:hover { background-color: var(--color-surface-secondary); color: var(--color-text-primary); }
.sidebar__link.is-active { background-color: var(--color-brand-light); color: var(--color-brand); }
.sidebar__divider {
  height: 1px;
  background-color: var(--color-border);
  margin: var(--space-3) 0;
}
.sidebar-overlay {
  position: fixed;
  inset: 0;
  z-index: 99;
  background-color: var(--color-overlay);
  opacity: 0;
  transition: opacity var(--transition-natural);
  visibility: hidden;
}
.sidebar-overlay.is-visible { opacity: 1; visibility: visible; }

/* Page Header */
.page-header { margin-bottom: var(--space-6); }
.page-header__title {
  font-size: var(--font-size-xxl);
  font-weight: var(--font-weight-extrabold);
  line-height: 1.2;
  margin-bottom: var(--space-2);
}
.page-header__subtitle {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  max-width: 60ch;
}

/* Forms & Controls */
.form-controls {
  display: grid;
  gap: var(--space-4);
  margin-bottom: var(--space-5);
}
@media (min-width: 768px) {
  .form-controls { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
}
.input-group { position: relative; }
.input-group__icon {
  position: absolute;
  top: 50%;
  left: var(--space-4);
  transform: translateY(-50%);
  color: var(--color-text-tertiary);
  pointer-events: none;
}
.input {
  width: 100%;
  height: var(--control-height);
  padding: 0 var(--space-4);
  background-color: var(--color-surface-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: var(--font-size-base);
  color: var(--color-text-primary);
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}
.input:focus { border-color: var(--color-brand); }
.input--with-icon { padding-left: 44px; }
.custom-select { position: relative; }
.custom-select__button {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  text-align: left;
  cursor: pointer;
}
.custom-select__button .icon { transition: transform var(--transition-natural); }
.custom-select.is-open .custom-select__button .icon { transform: rotate(180deg); }
.custom-select__options {
  position: absolute;
  top: calc(100% + var(--space-2));
  left: 0;
  right: 0;
  z-index: 10;
  max-height: 250px;
  overflow-y: auto;
  padding: var(--space-2);
  background-color: var(--color-surface-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  opacity: 0;
  transform: translateY(-10px);
  transition: opacity var(--transition-fast), transform var(--transition-fast);
  pointer-events: none;
}
.custom-select.is-open .custom-select__options { opacity: 1; transform: translateY(0); pointer-events: auto; }
.custom-select__option {
  padding: var(--space-3);
  border-radius: var(--radius-sm);
  cursor: pointer;
  user-select: none;
}
.custom-select__option:hover { background-color: var(--color-surface-secondary); }
.custom-select__option.is-selected { background-color: var(--color-brand-light); color: var(--color-brand); font-weight: var(--font-weight-semibold); }
.info-bar {
  padding: var(--space-3);
  background-color: var(--color-surface-tertiary);
  border-radius: var(--radius-md);
  text-align: center;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

/* Card Component */
.card {
  background-color: var(--color-surface-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition-natural), box-shadow var(--transition-natural);
}
.card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
.card__clickable {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: var(--space-4) var(--space-5);
  background: none;
  border: none;
  font-size: inherit;
  font-family: inherit;
  text-align: left;
  cursor: pointer;
}
.card__title { font-weight: var(--font-weight-semibold); }
.card__price { font-weight: var(--font-weight-bold); color: var(--color-brand); }
.card--preorder { padding: var(--space-5); cursor: pointer; }
.card--preorder.is-expanded .card--preorder-details {
    max-height: 500px;
    opacity: 1;
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--color-border);
}
.card--preorder.is-expanded .expand-indicator { transform: rotate(180deg); }
.card--preorder-header {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: start;
  gap: var(--space-4);
}
.card--preorder-name { font-weight: var(--font-weight-bold); }
.card--preorder-product { color: var(--color-text-secondary); font-size: var(--font-size-sm); }
.card--preorder-date { 
    grid-column: 1 / -1;
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    margin-top: var(--space-2);
}
.card--preorder-status { display: flex; align-items: center; }
.expand-indicator { transition: transform var(--transition-natural); }
.card--preorder-details {
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height var(--transition-natural), opacity var(--transition-fast), margin-top var(--transition-natural), padding-top var(--transition-natural);
}
.details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-4);
}
.detail-item__label {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-tertiary);
    text-transform: uppercase;
}
.detail-item__value { font-weight: var(--font-weight-medium); }

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: var(--space-1) var(--space-3);
  border-radius: 99px;
  font-size: 11px;
  font-weight: var(--font-weight-bold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  white-space: nowrap;
}
.status-badge::before { content: ''; width: 8px; height: 8px; border-radius: 50%; }
.status-badge--success { color: #166534; background-color: #DCFCE7; }
.status-badge--success::before { background-color: var(--color-success); }
.status-badge--progress { color: #1E40AF; background-color: #DBEAFE; }
.status-badge--progress::before { background-color: var(--color-brand); }
.status-badge--pending { color: #9A3412; background-color: #FFEDD5; }
.status-badge--pending::before { background-color: var(--color-warning); }
.status-badge--failed { color: #991B1B; background-color: #FEE2E2; }
.status-badge--failed::before { background-color: var(--color-error); }

/* Pagination */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-4);
  margin-top: var(--space-6);
}
.pagination__info {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-secondary);
}

/* Button Component */
.button {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  height: var(--control-height);
  padding: 0 var(--space-5);
  border-radius: var(--radius-md);
  border: 1px solid transparent;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  text-align: center;
  transition: background-color var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform var(--transition-fast);
}
.button:hover { transform: translateY(-2px); }
.button:disabled { cursor: not-allowed; opacity: 0.5; transform: none; }
.button--primary { background-color: var(--color-brand); color: white; }
.button--primary:hover:not(:disabled) { background-color: #0062CC; }
.button--secondary { background-color: var(--color-surface-primary); color: var(--color-text-primary); border-color: var(--color-border); }
.button--secondary:hover:not(:disabled) { background-color: var(--color-surface-secondary); }

/* Modal */
.modal {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
  visibility: hidden;
}
.modal[hidden] { display: none; }
.modal.is-open { visibility: visible; }
.modal__overlay {
  position: absolute;
  inset: 0;
  background-color: var(--color-overlay);
  opacity: 0;
  transition: opacity var(--transition-natural);
}
.modal.is-open .modal__overlay { opacity: 1; }
.modal__content {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 400px;
  background-color: var(--color-surface-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  display: flex;
  flex-direction: column;
  max-height: 90vh;
  opacity: 0;
  transform: scale(0.95);
  transition: opacity var(--transition-natural), transform var(--transition-natural);
}
.modal.is-open .modal__content { opacity: 1; transform: scale(1); }
.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--color-border);
  flex-shrink: 0;
}
.modal__title { font-size: var(--font-size-lg); font-weight: var(--font-weight-bold); }
.modal__close {
  display: grid;
  place-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  font-size: 24px;
  background: none;
  border: none;
  border-radius: 50%;
  color: var(--color-text-tertiary);
  cursor: pointer;
  line-height: 1;
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
.modal__close:hover { background-color: var(--color-surface-secondary); color: var(--color-text-primary); }
.modal__body { padding: var(--space-5); overflow-y: auto; }
.modal__footer {
  padding: var(--space-4) var(--space-5);
  border-top: 1px solid var(--color-border);
  flex-shrink: 0;
}
.modal__footer .button { width: 100%; }

/* Payment Modal Specifics */
.payment-recap {
  padding: var(--space-4);
  background-color: var(--color-surface-secondary);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-5);
}
.payment-recap__item { display: flex; justify-content: space-between; gap: var(--space-4); }
.payment-recap__item:not(:last-child) { margin-bottom: var(--space-2); }
.payment-recap__label { color: var(--color-text-secondary); }
.payment-recap__value { font-weight: var(--font-weight-semibold); text-align: right; }
.payment-options__group { display: flex; flex-direction: column; gap: var(--space-3); margin-bottom: var(--space-5); }
.payment-option input { position: absolute; opacity: 0; }
.payment-option label {
  display: flex;
  justify-content: space-between;
  padding: var(--space-4);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: border-color var(--transition-fast), background-color var(--transition-fast);
}
.payment-option input:checked + label {
  border-color: var(--color-brand);
  background-color: var(--color-brand-light);
  font-weight: var(--font-weight-semibold);
}
.payment-option__fee { color: var(--color-text-secondary); }
.payment-total { text-align: right; }
.payment-total__row { display: flex; justify-content: space-between; font-size: var(--font-size-sm); }
.payment-total__row:not(:last-child) { margin-bottom: var(--space-2); }
.payment-total__label { color: var(--color-text-secondary); }
.payment-total__value { font-weight: var(--font-weight-medium); }
.payment-total__row--grand {
  margin-top: var(--space-3);
  padding-top: var(--space-3);
  border-top: 1px solid var(--color-border);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-bold);
}

/* Empty State & Skeleton */
.empty-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: var(--space-7) var(--space-5);
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-lg);
  margin-top: var(--space-5);
}
.empty-state__icon {
  width: 56px;
  height: 56px;
  color: var(--color-text-tertiary);
  margin: 0 auto var(--space-4);
}
.empty-state p { color: var(--color-text-secondary); }

.skeleton {
  position: relative;
  overflow: hidden;
  background-color: var(--color-surface-tertiary);
  border-color: transparent !important;
}
.skeleton::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: linear-gradient(90deg, transparent, rgba(0,0,0,0.04), transparent);
  transform: translateX(-100%);
  animation: shimmer 1.8s infinite;
}
@keyframes shimmer { 100% { transform: translateX(100%); } }
.skeleton-text {
  display: block;
  background-color: var(--color-surface-tertiary);
  border-radius: var(--radius-sm);
  color: transparent !important;
}
.skeleton-card-text-1 { width: 60%; height: 1em; margin-bottom: 0.5em; }
.skeleton-card-text-2 { width: 75%; height: 0.8em; }
.skeleton-card-badge { width: 80px; height: 24px; border-radius: 99px;}

/* Noscript Warning */
.noscript-warning { padding: var(--space-4); background-color: var(--color-warning); text-align: center; font-weight: var(--font-weight-semibold); }
